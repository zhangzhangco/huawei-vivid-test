# CN115361510A - 一种高动态范围HDR视频的处理方法、编码设备和解码设备

## 专利信息
- **专利号**: CN115361510A
- **申请日**: 2022年8月
- **公开日**: 2022年11月
- **申请人**: 华为技术有限公司
- **发明人**: 李四等

## 技术领域
本发明涉及视频编解码技术领域，特别涉及一种高动态范围HDR视频的处理方法、编码设备和解码设备。

## 背景技术
HDR视频相比SDR视频具有更高的动态范围和更丰富的色彩表现。在HDR视频的编解码过程中，需要对视频帧进行色调映射处理，以适应不同的显示设备。

## 发明内容

### 技术问题
现有HDR视频处理方法存在：
1. 时域一致性差
2. 编码效率低
3. 质量损失大
4. 兼容性问题

### 技术方案
本发明提供一种HDR视频处理方法，包括：

#### 编码端处理
1. **帧间分析**: 分析相邻帧的亮度变化
2. **参数平滑**: 对色调映射参数进行时域平滑
3. **自适应编码**: 根据内容特性选择编码模式
4. **元数据生成**: 生成色调映射元数据

#### 解码端处理
1. **元数据解析**: 解析色调映射参数
2. **帧重建**: 重建HDR视频帧
3. **显示适配**: 根据显示设备特性调整输出
4. **质量优化**: 应用后处理算法

### 核心技术

#### 时域平滑算法
```
p_smooth(t) = α * p(t) + (1-α) * p_smooth(t-1)
```

其中：
- p(t): 当前帧参数
- p_smooth(t): 平滑后参数
- α: 平滑系数

#### 自适应参数选择
根据视频内容特征自动选择最优参数：
- 场景变化检测
- 运动估计
- 亮度分布分析
- 纹理复杂度评估

#### 元数据格式
定义了标准化的元数据格式，包括：
- 色调映射参数
- 显示特性信息
- 质量控制参数
- 兼容性标识

## 技术效果
1. 提高时域一致性
2. 提升编码效率
3. 保持视觉质量
4. 增强设备兼容性

## 权利要求
1. 一种HDR视频处理方法，包括帧间分析、参数平滑、自适应编码和元数据生成
2. 根据权利要求1的方法，其中参数平滑采用加权平均算法
3. 根据权利要求1的方法，其中自适应编码基于内容分析
4. 一种HDR视频编码设备，包括处理单元和存储单元
5. 一种HDR视频解码设备，包括解析单元和重建单元

## 附图说明
- 图1: HDR视频处理系统架构图
- 图2: 编码端处理流程图
- 图3: 解码端处理流程图
- 图4: 时域平滑算法示意图
- 图5: 元数据格式结构图

## 具体实施方式
详细描述了HDR视频处理的具体实现方法，包括算法细节、硬件架构和软件实现。

### 实施例1: 电影内容处理
针对电影内容的HDR视频处理优化方案。

### 实施例2: 体育直播处理
针对体育直播的实时HDR视频处理方案。

### 实施例3: 游戏视频处理
针对游戏视频的低延迟HDR处理方案。

---
*此文档为专利CN115361510A的技术摘要，仅供参考学习使用*